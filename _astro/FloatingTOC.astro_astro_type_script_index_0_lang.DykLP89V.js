import{i as c,T as w}from"./tocUtils.xdNHizP3.js";const g=document.querySelector(".floating-toc-wrapper"),u=g?.getAttribute("data-is-sidebar-toc-enabled")==="true";typeof window.FloatingTOC>"u"&&(window.FloatingTOC={btn:null,panel:null,manager:null,isPostPage:c});window.toggleFloatingTOC=function(){const t=window.FloatingTOC.panel;if(!t)return;t.classList.contains("hide")?(t.classList.remove("hide"),t.classList.add("show")):(t.classList.remove("show"),t.classList.add("hide"))};function e(){const t=window.FloatingTOC.panel;t&&!t.classList.contains("hide")&&(t.classList.add("hide"),t.classList.remove("show"))}function f(){window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),window.addEventListener("popstate",e),document.addEventListener("visibilitychange",()=>{document.hidden&&e()}),document.addEventListener("astro:page-load",e),document.addEventListener("astro:before-preparation",e),window.addEventListener("hashchange",()=>{window.tocInternalNavigation||e(),window.tocInternalNavigation=!1}),document.addEventListener("click",i=>{const o=i.target?.closest("a");if(!o||!o.href)return;const s=o.getAttribute("href");if(s&&!s.startsWith("#")&&!s.startsWith("javascript:")&&!window.tocInternalNavigation){const r=document.getElementById("floating-toc-panel");(!r||!r.contains(o))&&e()}});const t=history.pushState,n=history.replaceState;history.pushState=function(...i){return e(),t.apply(this,i)},history.replaceState=function(...i){return e(),n.apply(this,i)}}function p(){if(!window.FloatingTOC.isPostPage())return!1;const t=localStorage.getItem("postListLayout")||"list",n=window.innerWidth<1200;return t==="grid"||n||!u}function d(){const t=window.FloatingTOC.btn;t&&(p()?t.classList.remove("hide"):(t.classList.add("hide"),e()))}async function a(){if(window.FloatingTOC.btn=document.getElementById("floating-toc-btn"),window.FloatingTOC.panel=document.getElementById("floating-toc-panel"),!(!window.FloatingTOC.btn||!window.FloatingTOC.panel)){d();try{window.FloatingTOC.manager&&window.FloatingTOC.manager.cleanup(),window.FloatingTOC.manager=new w({contentId:"floating-toc-content",indicatorId:"floating-active-indicator",maxLevel:3,scrollOffset:80}),window.FloatingTOC.manager.init();const t=document.getElementById("floating-toc-content");t&&t.addEventListener("click",n=>{n.target?.closest('a[href^="#"]')&&(window.tocInternalNavigation=!0)},{capture:!0}),f()}catch(t){console.error("Failed to load TOCManager:",t)}}}a();if(typeof window<"u"){document.addEventListener("swup:contentReplaced",()=>{setTimeout(a,100)}),document.addEventListener("astro:page-load",()=>{setTimeout(a,100)}),window.addEventListener("popstate",()=>{setTimeout(a,200)}),window.addEventListener("layoutChange",()=>{d()});let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{d()},300)})}
